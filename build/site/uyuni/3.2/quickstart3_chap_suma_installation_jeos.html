<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JeOS Installation :: Uyuni Documentation (Prototype)</title>
    <meta name="generator" content="Antora 1.0.3">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Uyuni Documentation (Prototype)</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="uyuni" data-version="3.2">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">Uyuni</span>
    <span class="version">3.2</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Uyuni</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../dev/MAIN-manager.html">dev</a>
        </li>
        <li class="version is-current">
          <a href="MAIN-manager.html">3.2</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../dev/MAIN-manager.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="MAIN-manager.html">Uyuni</a></li>
    <li class="crumb"><a href="quickstart3_chap_suma_installation_jeos.html">JeOS Installation</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="versions-menu-toggle" title="Show other versions of page">3.2</button>
  <div class="versions-menu">
    <a class="version" href="../dev/quickstart3_chap_suma_installation_jeos.html">dev</a>
    <a class="version is-current" href="quickstart3_chap_suma_installation_jeos.html">3.2</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/jcayouette/uyuni-doc-test/edit/maintenance/3.2/docs/modules/ROOT/pages/quickstart3_chap_suma_installation_jeos.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1>JeOS Installation</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#quickstart.sect.kvm.settings">1. Virtual Machine Manager (virt-manager) Settings</a></li>
<li><a href="#jeos.kvm.settings">2. JeOS KVM Settings</a></li>
<li><a href="#jeos.susemgr.prep">3. Preparing JeOS for </a></li>
</ul>
</div>
<div class="sect1">
<h2 id="quickstart.sect.kvm.settings"><a class="anchor" href="#quickstart.sect.kvm.settings"></a><a class="link" href="#quickstart.sect.kvm.settings">1. Virtual Machine Manager (virt-manager) Settings</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter provides the required (KVM) settings for installation of SUSE Linux Enterprise Just Enough Operating System (JeOS) 12 as the base for .
A kernel virtual machine (KVM) combined with Virtual Machine Manager (<em>virt-manager</em>) will be used as a sandbox for your first installation.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title=":bulb:"></i>
</td>
<td class="content">
<div class="title">SUSEVirtualization Guide</div>
<div class="paragraph">
<p>For more information on virtualization, see: <a href="https://www.suse.com/documentation/sles-12/singlehtml/book_virt/book_virt.html">SUSE Linux Enterprise Virtualization Guide</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Enter the following settings when creating a new virtual machine using <strong>virt-manager</strong>.
In the following table replace <em>version</em> with the actual product version string.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2">KVM Settings</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installation Method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Import Existing Disk Image</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OS:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SLES&lt;VERSION&gt;-JeOS-for-kvm-and-xen.x86_64-GM.qcow2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Memory:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4096 MB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPU&#8217;s:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage Format:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>.qcow2</em> 24 GB (Default) JeOS Root Partition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virtual Disks:</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">101 GB for <code class="path">/var/spacewalk</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50 GB for <code class="path">/var/lib/pgsql</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 GB for swap</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test-setup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bridge <em>br0</em></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title=":bulb:"></i>
</td>
<td class="content">
<div class="title">SUSE Virtualization Guide</div>
<div class="paragraph">
<p>For more information on virtualization, see: <a href="https://www.suse.com/documentation/sles-12/singlehtml/book_virt/book_virt.html">SUSE Linux Enterprise Virtualization Guide</a></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jeos.kvm.settings"><a class="anchor" href="#jeos.kvm.settings"></a><a class="link" href="#jeos.kvm.settings">2. JeOS KVM Settings</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create three additional virtual disks required for the  storage partitions.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure: Creating the Required Partitions with KVM</div>
<ol class="arabic">
<li>
<p>Create a new virtual machine using the downloaded JeOS KVM image and select <b class="menuref">Import existing disk image</b> .</p>
</li>
<li>
<p>Configure RAM and number of CPUs (At least 4 GB RAM and 2 CPUs).</p>
</li>
<li>
<p>Name your KVM machine and select the <b class="menuref">Customize configuration before install</b> check box.</p>
</li>
<li>
<p>Select the <b class="button">Add Hardware</b> button and create three new virtual disks with the following specifications.
These disks will be partitioned and mounted in <a href="#proc.jeos.susemgr.prep">Procedure: Preparing JeOS for  Installation</a>.</p>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">VirtIO Storage Disks</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Sizing</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spacewalk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">101&#160;GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pgsql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50&#160;GB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">swap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4&#160;GB</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <b class="menuref">Begin Installation</b> and your new VM will boot from the JeOS image.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Proceed through the basic JeOS installation prompts until you reach the command line.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title=":bulb:"></i>
</td>
<td class="content">
<div class="title">Root Password</div>
<div class="paragraph">
<p>During the basic installation prompts you are asked to enter the root password.
Select a strong password and then in the next message box <b class="button">Confirm root Password</b>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jeos.susemgr.prep"><a class="anchor" href="#jeos.susemgr.prep"></a><a class="link" href="#jeos.susemgr.prep">3. Preparing JeOS for </a></h2>
<div class="sectionbody">
<div id="proc.jeos.susemgr.prep" class="olist arabic">
<div class="title">Procedure: Preparing JeOS for  Installation</div>
<ol class="arabic">
<li>
<p>Register with SCC:</p>
<div class="listingblock">
<div class="content">
<pre>SUSEConnect -e`EMAIL_ADDRESS`-r`SUSE_MANAGER_CODE`</pre>
</div>
</div>
</li>
<li>
<p>Add  repositories:</p>
<div class="listingblock">
<div class="content">
<pre>SUSEConnect -p SUSE-Manager-Server/&lt;productnumber&gt;/x86_64 -r`SUSE_MANAGER_CODE`</pre>
</div>
</div>
</li>
<li>
<p>Install <span class="package">yast2-storage</span> with all required dependencies (approx. 40 packages, 30 MB when installed).
This basic administration package is required for preparing storage partitions:</p>
<div class="listingblock">
<div class="content">
<pre>zypper in -t package yast2-storage</pre>
</div>
</div>
</li>
<li>
<p>Partition and mount the virtual disks at the following locations using YaST Partitioner (<code class="command">yast2 disk</code>).</p>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">VirtIO Storage Disks</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Storage Size</th>
<th class="tableblock halign-left valign-top">File System Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="path">/var/spacewalk</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">101&#160;GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XFS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="path">/var/lib/pgsql</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50&#160;GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XFS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VirtIO Disk 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="path">swap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4&#160;GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">swap</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>SLES by default uses the BTRFS file system.
A mount point is created automatically for <code class="path">/var/lib/pgsql/</code> (even when not installed).
This must be removed or commented out from the <code class="path">/etc/fstab</code> entries.
As root, edit <code class="path">/etc/fstab</code> and comment out or remove the line:</p>
<div class="listingblock">
<div class="content">
<pre>/var/lib/pgsql btrfs subvol=@/var/lib/pgsql 0 0</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title=":warning:"></i>
</td>
<td class="content">
<div class="title">Remove <code class="command">pgsql</code> from the fstab Configuration File</div>
<div class="paragraph">
<p>If you do not remove this line from fstab the first time you shut down the server you will lose your database.
This occurs because you will have duplicate entries in the fstab file. <em>Updated tools shipped with recent SPs will no longer require human intervention.</em></p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Exit the partitioner and install the  pattern:</p>
<div class="listingblock">
<div class="content">
<pre>zypper in -t pattern suma_server</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For proceeding with  setup, see:
<a href="#">suma-setup-with-yast-sumasetup.adoc#suma-setup-with-yast-sumasetup</a></p>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
